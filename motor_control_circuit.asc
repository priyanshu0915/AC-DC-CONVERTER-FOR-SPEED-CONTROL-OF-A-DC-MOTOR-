Version 4
SHEET 1 1196 1496
WIRE -1088 -384 -1200 -384
WIRE -1024 -384 -1088 -384
WIRE -864 -384 -1024 -384
WIRE -576 -384 -864 -384
WIRE -320 -384 -576 -384
WIRE -96 -384 -320 -384
WIRE 128 -384 -96 -384
WIRE 272 -384 224 -384
WIRE 304 -384 272 -384
WIRE 496 -384 384 -384
WIRE 640 -384 496 -384
WIRE 784 -384 640 -384
WIRE -576 -368 -576 -384
WIRE -320 -368 -320 -384
WIRE -96 -368 -96 -384
WIRE -1200 -336 -1200 -384
WIRE -1088 -336 -1088 -384
WIRE 640 -336 640 -384
WIRE 272 -272 272 -384
WIRE -1200 -256 -1200 -272
WIRE -1200 -256 -1488 -256
WIRE -1024 -256 -1024 -384
WIRE -576 -256 -576 -288
WIRE -496 -256 -576 -256
WIRE 496 -256 496 -384
WIRE 784 -256 784 -384
WIRE -320 -240 -320 -288
WIRE -256 -240 -320 -240
WIRE -96 -240 -96 -288
WIRE 144 -240 144 -336
WIRE 144 -240 -96 -240
WIRE -1088 -224 -1088 -272
WIRE -1088 -224 -1280 -224
WIRE -576 -224 -576 -256
WIRE -320 -224 -320 -240
WIRE -96 -224 -96 -240
WIRE 640 -208 640 -256
WIRE 736 -208 640 -208
WIRE -1200 -192 -1200 -256
WIRE -1088 -192 -1088 -224
WIRE -1280 -176 -1280 -224
WIRE -1280 -176 -1488 -176
WIRE -784 -176 -832 -176
WIRE -640 -176 -704 -176
WIRE -496 -176 -496 -256
WIRE -384 -176 -496 -176
WIRE -176 -176 -176 -240
WIRE -160 -176 -176 -176
WIRE 640 -112 640 -208
WIRE -576 -96 -576 -128
WIRE -320 -96 -320 -128
WIRE -96 -96 -96 -128
WIRE -16 -96 -96 -96
WIRE -16 -80 -16 -96
WIRE -1200 0 -1200 -128
WIRE -1088 0 -1088 -128
WIRE -1088 0 -1200 0
WIRE -1024 0 -1024 -192
WIRE -1024 0 -1088 0
WIRE -576 0 -576 -16
WIRE -576 0 -1024 0
WIRE -320 0 -320 -16
WIRE -320 0 -576 0
WIRE -96 0 -96 -16
WIRE -96 0 -320 0
WIRE -16 0 -16 -16
WIRE -16 0 -96 0
WIRE 272 0 272 -208
WIRE 272 0 -16 0
WIRE 496 0 496 -192
WIRE 496 0 272 0
WIRE 640 0 640 -32
WIRE 640 0 496 0
WIRE 784 0 784 -176
WIRE 784 0 640 0
WIRE -112 64 -192 64
WIRE 240 64 -32 64
WIRE -400 80 -832 80
WIRE -656 112 -720 112
WIRE -112 128 -112 64
WIRE -112 128 -176 128
WIRE 240 128 240 64
WIRE 240 128 128 128
WIRE -544 144 -560 144
WIRE -112 144 -112 128
WIRE -32 144 -32 64
WIRE 64 144 -32 144
WIRE -1136 160 -1136 96
WIRE -1136 160 -1232 160
WIRE -1056 160 -1136 160
WIRE -656 160 -656 112
WIRE 736 160 736 -208
WIRE 736 160 128 160
WIRE -720 208 -720 112
WIRE -560 208 -560 144
WIRE -560 224 -560 208
WIRE -32 224 -32 144
WIRE -32 224 -112 224
WIRE -400 240 -400 80
WIRE -400 240 -528 240
WIRE -176 240 -176 128
WIRE -48 240 -176 240
WIRE 16 240 0 240
WIRE -592 256 -656 256
WIRE 0 256 0 240
WIRE 0 256 -96 256
WIRE -464 272 -528 272
WIRE -560 288 -592 288
WIRE -96 288 -96 256
WIRE -1232 304 -1232 240
WIRE -64 304 -80 304
WIRE -48 304 -48 240
WIRE -48 304 -64 304
WIRE -464 320 -464 272
WIRE -272 320 -272 64
WIRE -272 320 -464 320
WIRE -128 320 -272 320
WIRE -720 336 -720 304
WIRE -720 336 -784 336
WIRE -32 336 -64 336
WIRE -1056 352 -1056 240
WIRE -1056 352 -1168 352
WIRE -592 352 -592 288
WIRE -576 352 -592 352
WIRE -96 352 -96 336
WIRE -576 368 -576 352
WIRE -32 384 -32 336
WIRE -32 384 -80 384
WIRE -1056 416 -1056 352
WIRE -1056 416 -1072 416
WIRE -720 416 -720 336
WIRE -688 416 -720 416
WIRE 224 432 32 432
WIRE -1232 448 -1232 400
WIRE -1232 448 -1696 448
WIRE -688 448 -688 416
WIRE -80 448 -80 384
WIRE -80 448 -128 448
WIRE 32 448 32 432
WIRE 32 448 0 448
WIRE 224 480 224 432
WIRE 224 480 128 480
WIRE 32 496 32 448
WIRE 64 496 32 496
WIRE 848 496 848 272
WIRE 864 496 848 496
WIRE -1600 512 -1648 512
WIRE -1584 512 -1600 512
WIRE -1328 512 -1376 512
WIRE -208 512 -208 448
WIRE 288 512 128 512
WIRE -1648 528 -1648 512
WIRE -96 528 -96 352
WIRE -96 528 -112 528
WIRE -832 544 -1184 544
WIRE -112 544 -112 528
WIRE -1696 576 -1696 448
WIRE -1600 576 -1696 576
WIRE -1344 576 -1376 576
WIRE -1232 576 -1232 448
WIRE -1232 576 -1264 576
WIRE -1184 576 -1184 544
WIRE -1184 576 -1232 576
WIRE -1072 576 -1072 496
WIRE -1600 640 -1712 640
WIRE -1232 640 -1232 576
WIRE -1232 640 -1376 640
WIRE 560 656 560 624
WIRE -1232 672 -1232 640
WIRE 400 688 -128 688
WIRE -1600 704 -1680 704
WIRE -1312 704 -1376 704
WIRE 272 720 224 720
WIRE -1312 752 -1312 704
WIRE 224 752 224 720
WIRE 848 752 848 496
WIRE 272 768 272 720
WIRE 560 784 560 736
WIRE 560 784 448 784
WIRE -32 832 -64 832
WIRE 272 832 192 832
WIRE 560 832 560 784
WIRE -1232 848 -1232 736
WIRE -64 848 -64 832
WIRE -1232 864 -1232 848
WIRE 272 864 272 832
WIRE -1312 896 -1312 816
WIRE -128 896 -128 688
WIRE -32 896 -128 896
WIRE 448 896 448 784
WIRE 448 896 192 896
WIRE -480 960 -560 960
WIRE -384 960 -480 960
WIRE -256 960 -320 960
WIRE -160 960 -256 960
WIRE -32 960 -96 960
WIRE 400 960 400 688
WIRE 400 960 192 960
WIRE 400 976 400 960
WIRE 560 976 560 912
WIRE 560 976 400 976
WIRE -256 1024 -256 960
WIRE -32 1024 -80 1024
WIRE 272 1024 192 1024
WIRE 560 1024 560 976
WIRE -480 1056 -480 960
WIRE -384 1056 -384 960
WIRE 128 1088 128 1072
WIRE -256 1152 -256 1088
WIRE 560 1152 560 1088
WIRE 272 1168 272 1024
WIRE 272 1168 128 1168
WIRE -480 1184 -480 1136
WIRE -32 1184 -480 1184
WIRE 128 1184 128 1168
WIRE -480 1200 -480 1184
WIRE -32 1232 -32 1184
WIRE 64 1232 -32 1232
WIRE -480 1344 -480 1280
FLAG -1072 576 0
FLAG -1232 848 0
FLAG -1312 896 0
FLAG -1648 528 0
FLAG -1136 96 Vcc
FLAG -96 288 Vcc
FLAG 784 -384 Vout
FLAG -1200 0 0
FLAG -96 352 Vee
FLAG -688 528 Vcc
FLAG -656 160 0
FLAG -480 144 0
FLAG -640 368 0
FLAG 16 304 0
FLAG -112 608 0
FLAG -208 512 0
FLAG 96 464 Vcc
FLAG 96 112 Vcc
FLAG 96 528 Vee
FLAG 96 176 Vee
FLAG -560 208 Vee
FLAG -560 288 Vcc
FLAG 848 192 Vcc
FLAG 848 832 Vee
FLAG 128 1360 0
FLAG 224 752 0
FLAG -64 848 0
FLAG 560 1152 0
FLAG -256 1152 0
FLAG -384 1120 0
FLAG 560 624 Vcc
FLAG -480 1344 Vcc
FLAG -560 960 Vee
FLAG 128 1072 Vcc
FLAG 272 864 Vcc
FLAG -1680 704 Vcc
FLAG -832 -176 PWM
FLAG -832 544 RAMP
FLAG -832 80 RAMP
FLAG -784 336 PWM
FLAG -80 1024 Vcc
FLAG -1328 512 Vcc
FLAG -864 -384 Vd
FLAG -1632 64 Vcc
FLAG 288 512 Vdes
FLAG 848 496 Vdes
FLAG -1632 144 0
SYMBOL diode -1184 -272 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -1072 -272 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode -1072 -128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -1184 -128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL Misc\\NE555 -1488 608 R0
SYMATTR InstName U1
SYMBOL schottky 288 -208 R180
WINDOW 3 24 0 Left 2
WINDOW 0 24 64 Left 2
SYMATTR Value 1N5819
SYMATTR InstName D6
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL npn -160 -224 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL pmos 224 -336 M270
SYMATTR InstName M1
SYMATTR Value IRF9640
SYMBOL ind 288 -368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 1 59 VBottom 2
SYMATTR InstName L1
SYMATTR Value 2.2m
SYMATTR SpiceLine Ipk=0.18 Rser=11.8 Rpar=394892 Cpar=0
SYMBOL npn -384 -224 R0
SYMATTR InstName Q2
SYMATTR Value BC547B
SYMBOL npn -640 -224 R0
SYMATTR InstName Q3
SYMATTR Value BC547B
SYMBOL res -592 -384 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -336 -112 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res -336 -384 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -112 -112 R0
SYMATTR InstName R4
SYMATTR Value 1.5k
SYMBOL res -112 -384 R0
SYMATTR InstName R5
SYMATTR Value 470
SYMBOL res -592 -112 R0
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL res -688 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -160 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL res 624 -352 R0
SYMATTR InstName R9
SYMATTR Value 270k
SYMBOL res 624 -128 R0
SYMATTR InstName R10
SYMATTR Value 47k
SYMBOL res 768 -272 R0
SYMATTR InstName R11
SYMATTR Value 300
SYMBOL res -1248 144 R0
SYMATTR InstName R12
SYMATTR Value 2.2k
SYMBOL res -1072 144 R0
SYMATTR InstName R13
SYMATTR Value 20k
SYMBOL res -1088 400 R0
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res -1248 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -20 68 VTop 2
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL cap -1248 672 R0
SYMATTR InstName C5
SYMATTR Value 2.2n
SYMBOL OpAmps\\LT1007 -96 256 M0
SYMATTR InstName U3
SYMBOL voltage -1488 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 16.92 50)
SYMBOL res -704 432 R0
SYMATTR InstName R18
SYMATTR Value 4.7K
SYMBOL npn -656 304 R180
SYMATTR InstName Q5
SYMATTR Value BC546B
SYMBOL OpAmps\\LT1007 96 80 M0
SYMATTR InstName U4
SYMBOL OpAmps\\LT1007 96 432 M0
SYMATTR InstName U5
SYMBOL cap 0 240 R0
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL cap -128 544 R0
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL cap -576 352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL cap -480 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 100n
SYMBOL res -112 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL res -176 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 100k
SYMBOL res 16 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL res -128 128 R0
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL OpAmps\\LT1007 -560 320 R180
SYMATTR InstName U2
SYMBOL res 832 176 R0
SYMATTR InstName R23
SYMATTR Value 200k
SYMBOL res 832 736 R0
SYMATTR InstName R24
SYMATTR Value 220k
SYMBOL cap -1040 -256 R0
SYMATTR InstName C1
SYMATTR Value 470µ
SYMBOL pnp -1168 400 R180
SYMATTR InstName Q4
SYMATTR Value BC557C
SYMBOL Misc\\NE555 80 928 R0
SYMATTR InstName U6
SYMBOL npn 64 1184 R0
SYMATTR InstName Q6
SYMATTR Value BC547C
SYMBOL res 544 816 R0
SYMATTR InstName R16
SYMATTR Value 4.7k
SYMBOL res 544 640 R0
SYMATTR InstName R17
SYMATTR Value 4.7k
SYMBOL res -496 1040 R0
SYMATTR InstName R25
SYMATTR Value 100k
SYMBOL res -496 1184 R0
SYMATTR InstName R26
SYMATTR Value 150k
SYMBOL res 112 1072 R0
SYMATTR InstName R27
SYMATTR Value 1.2k
SYMBOL res 112 1264 R0
SYMATTR InstName R28
SYMATTR Value 100
SYMBOL cap -96 944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 1µ
SYMATTR SpiceLine V=50 Irms=3.55 Rser=0.0172 Lser=0 mfg="KEMET" pn="C1210C105K5PAC" type="X5R"
SYMBOL cap 544 1024 R0
SYMATTR InstName C12
SYMATTR Value 2.2n
SYMBOL diode -272 1024 R0
SYMATTR InstName D7
SYMBOL diode -384 976 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL cap 256 768 R0
SYMATTR InstName C13
SYMATTR Value 100n
SYMBOL voltage -1632 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 10
SYMBOL cap -400 1056 R0
SYMATTR InstName C10
SYMATTR Value 10µ
SYMBOL cap -32 -80 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL cap -1328 752 R0
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL cap 480 -256 R0
SYMATTR InstName C3
SYMATTR Value 4.7µ
TEXT -1736 912 Left 2 !.tran 0 10 100us startup
TEXT -1624 840 Left 2 ;ramp signal generator
TEXT -544 456 Left 2 ;PWM generator
TEXT 40 1440 Left 2 ;negative charge pump
TEXT -416 -440 Left 2 ;Driver Circuit
TEXT 312 -496 Left 2 ;DC to DC Buck Converter
TEXT -1152 -440 Left 2 ;AC to DC converter
